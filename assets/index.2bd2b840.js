const x=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}};x();function s(n){const i=document.querySelector(n);if(i)return i;throw Error("element not found")}function k(n){return new Promise((i,e)=>{const t=new FileReader;t.addEventListener("load",()=>{const a=new Image;a.addEventListener("load",()=>{i(a)}),a.addEventListener("error",()=>e()),a.src=t.result}),t.addEventListener("error",()=>e()),t.readAsDataURL(n)})}const w=document.createElement("canvas"),E=w.getContext("2d");function g(n){w.width=n.width,w.height=n.height,E.drawImage(n,0,0);const i=E.getImageData(0,0,n.width,n.height);return[i,i.data]}function h(n){return new Promise(i=>{w.width=n.width,w.height=n.height,E.putImageData(n,0,0);const e=new Image;e.addEventListener("load",()=>{i(e)}),e.src=w.toDataURL("png")})}function p(n,i,e){return e*n.width*4+i*4}async function b(n){const[i,e]=g(n);for(let t=0;t<e.length;t+=4)e[t]*=1.1,e[t+1]*=1.1,e[t+2]*=1.1;return await h(i)}async function P(n){const[i,e]=g(n);for(let t=0;t<e.length;t+=4)e[t]/=1.1,e[t+1]/=1.1,e[t+2]/=1.1;return await h(i)}async function C(n){const[i,e]=g(n);for(let t=0;t<e.length;t+=4){const a=(e[t]+e[t+1]+e[t+2])/3;e[t]=e[t+1]=e[t+2]=a}return await h(i)}async function F(n){const[i,e]=g(n);for(let t=0;t<e.length;t+=4)e[t]=255-e[t],e[t+1]=255-e[t+1],e[t+2]=255-e[t+2];return await h(i)}async function M(n){const[i,e]=g(n);for(let t=0;t<e.length;t+=4){const a=(e[t]+e[t+1]+e[t+2])/3;e[t]=e[t+1]=e[t+2]=a>127?255:0}return await h(i)}const L=[[1/16,2/16,1/16],[2/16,4/16,2/16],[1/16,2/16,1/16]];async function O(n){const[i,e]=g(n);for(let t=0;t<n.height;t++)for(let a=0;a<n.width;a++){const r=[0,0,0];for(let c=-1;c<2;c++)if(!(t+c<0||t+c>=n.height))for(let d=-1;d<2;d++){if(a+d<0||a+d>=n.width)continue;const v=p(i,a+d,t+c);r[0]+=e[v]*L[c+1][d+1],r[1]+=e[v+1]*L[c+1][d+1],r[2]+=e[v+2]*L[c+1][d+1]}const o=p(i,a,t);e[o]=r[0],e[o+1]=r[1],e[o+2]=r[2]}return h(i)}async function R(n){const[i,e]=g(n),t=new Uint8ClampedArray(e.length);for(let a=0;a<n.height;a++)for(let r=0;r<n.width;r++){const o=p(i,r,a);(a==0||r==0)&&(t[o]=t[o+1]=t[o+2]=0,t[o+3]=255);const c=p(i,r-1,a-1);t[o]=Math.abs(e[o]-e[c]),t[o+1]=Math.abs(e[o+1]-e[c+1]),t[o+2]=Math.abs(e[o+2]-e[c+2]),t[o+3]=255}return t.forEach((a,r)=>e[r]=a),h(i)}const D=s("#file-input"),I=s("#image-outlet"),u=s("#canvas"),y=u.getContext("2d");let l=null,f=null;D.addEventListener("change",async()=>{var i;const n=(i=D.files)==null?void 0:i[0];n&&(l=f=await k(n),I.innerHTML="",I.appendChild(l),u.width=l.width,u.height=l.height,y.clearRect(0,0,u.width,u.height),y.drawImage(l,0,0))});s("#original").addEventListener("click",()=>{!l||(f=l,y.clearRect(0,0,u.width,u.height),y.drawImage(f,0,0))});async function m(n){!l||!f||(f=await n(f),y.drawImage(f,0,0))}s("#brighter").addEventListener("click",()=>m(b));s("#darker").addEventListener("click",()=>m(P));s("#gray-scale").addEventListener("click",()=>m(C));s("#nega-posi").addEventListener("click",()=>m(F));s("#two-colorize").addEventListener("click",()=>m(M));s("#gausian").addEventListener("click",()=>m(O));s("#diff").addEventListener("click",()=>m(R));
